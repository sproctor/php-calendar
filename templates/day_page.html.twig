{% extends "base.html.twig" %}

{% block body %}
  <h3>
    <a href="{{ context.createDateUrl('display_day', yesterday) }}"><i class="fas fa-angle-left"></i></a>
    {{ context.getDate|localizeddate('long', 'none') }}
    <a href="{{ context.createDateUrl('display_day', tomorrow) }}"><i class="fas fa-angle-right"></i></a>
  </h3>
  {% if occurrences|length > 0 %}
    <form name="form" action="{{ context.createUrl('event_delete') }}" method="post">
    {% set can_modify = false %}
    <table class="table">
      <thead>
        <tr>
          <th>{{ "title-label"|trans }}</th>
          <th>{{ "time-label"|trans }}</th>
          <th>{{ "description-label"|trans }}</th>
        </tr>
      </thead>
      <tbody>
      {% for occurrence in occurrences %}
      {% if occurrence.canRead(user) %}
        <tr>
          <td>{% if occurrence.canModify(user) %}<div class="form-check form-check-inline">
            {% set can_modify = true %}
            <input name="eid[]" type="checkbox" class="form-check-input" id="eid_{{ occurrence.getEid }}" value="{{ occurrence.getEid }}">
            <label class="form-check-label" for="eid_{{ occurrence.getEid }}">
            {% endif %}<a href="{{ context.createEventUrl('display_event', occurrence.getEid) }}">{{ occurrence.getSubject }}</a>
            {% if occurrence.canModify(user) %}
            </label></div> <a href="{{ context.createEventUrl('event_form', occurrence.getEid) }}">{{ "modify-label"|trans }}</a>
            {% endif %}
          </td>
          {% set textcolor = occurrence.getTextColor %}
          {% set bgcolor = occurrence.getBgColor %}
          <td>{{ occurrence.getTimeString }}</td>
          <td>{{ occurrence.getDescription }}</td>
        </tr>
      {% endif %}
      {% endfor %}
      </tbody>
    </table>
    {% if can_modify %}
      <button type="submit" class="btn btn-primary" data-toggle="confirmation" data-title="{{ "confirmation-required-dialog-title"|trans }}" data-button-text="{{ "delete-events-button"|trans }}"
              data-content="{{ "permanently-delete-selected-events-question"|trans }}">{{ "delete-events-button"|trans }}</button>
    {% endif %}
    </form>
  {% else %}
    <h3>{{ "no-events-message"|trans }}</h3>
  {% endif %}
{% endblock %}
